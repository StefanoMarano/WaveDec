
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>User’s guide: wdPicker &#8212; WaveDec  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage Examples" href="examples.html" />
    <link rel="prev" title="User’s guide: WaveDecActive" href="userguide_WaveDecActive.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Usage Examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="userguide_WaveDecActive.html" title="User’s guide: WaveDecActive"
             accesskey="P">previous</a> |</li>
<li><a href="https://github.com/StefanoMarano">Home</a> &#187; <a href="index.html">WaveDec  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-s-guide-wdpicker">
<h1>User’s guide: wdPicker<a class="headerlink" href="#user-s-guide-wdpicker" title="Permalink to this headline">¶</a></h1>
<div class="section" id="analysis-of-the-output-files">
<h2>Analysis of the output files<a class="headerlink" href="#analysis-of-the-output-files" title="Permalink to this headline">¶</a></h2>
<p>The script <code class="docutils literal notranslate"><span class="pre">wdPicker.py</span></code> allows to visualize and perform some analysis of WaveDec output files. It is also possible to save to disk figures and comma-separated values (CSV) files with picked curves.</p>
<p>The workflow is as follow:</p>
<ul class="simple">
<li><p>Quickly <strong>plot</strong> the WaveDec or WaveDecActive output files with no user intervention.</p></li>
<li><p>Using a graphical interface, manually <strong>select</strong> the wavenumber ML estimates corresponding to the dispersion curve of a certain mode of propagation.</p></li>
<li><p>For Rayleigh waves, manually select the ellipticity angle ML estimates of the ellipticity angle curve.</p></li>
<li><p>The ML estimates of the selected dispersion curve (and eventually ellipticty angle curve) are saved to CSV file. (Same format of WaveDec output files).</p></li>
<li><p>Automatically <strong>pick</strong> the median value of the filtered estimates for the dispersion curve or the ellipticity curve.</p></li>
</ul>
<p>In each of these three steps, figures and CSV are generated and can be saved to file. To choose which files need to be saved to disk, see command line options (see inline help <code class="docutils literal notranslate"><span class="pre">wdPicker.py</span> <span class="pre">-h</span></code>). In order to change default settings including figure output format (eg, PDF or PNG), resolution (dpi), input and output folders, edit the corresponding values in <code class="docutils literal notranslate"><span class="pre">bin/wdSettings.py</span></code>.</p>
<p>Observe that the name of the WaveDec output files should not be changed as it is used by wdPicker.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on the version of your libraries, several warning messages generated by Qt libraries while using <code class="docutils literal notranslate"><span class="pre">wdPicker.py</span></code> may be printed in the console.
The errors do not affect the functionalities but only represent a nuisance when reading the instructions from the console.</p>
</div>
<div class="section" id="plotting">
<h3>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">wdPicker.py</span></code> immediately produces figures of all WaveDec output files in the current folder without requiring any user intervention.</p>
<p>Plots generated include:</p>
<ul class="simple">
<li><p>Array layout</p></li>
<li><p>Dispersion curve, in wavenumber vs frequency and in velocity vs frequency</p></li>
<li><p>Ellipticity angle curve for Rayleigh waves</p></li>
<li><p>Azimuth vs frequency</p></li>
</ul>
<p>Each ML estimate is depicted with a red dot. The density of the estimates is represented in the background using a color scale and is obtained using a standard non-parametric method, <a class="reference external" href="https://en.wikipedia.org/wiki/Kernel_density_estimation">kernel density estimation (KDE)</a>. For quantities defined on angles (azimuth and ellipticity angle) the modularity is considered.</p>
<p>If the file <code class="docutils literal notranslate"><span class="pre">ArrayResolutionLimits.csv</span></code> is present, array resolution limits are overlaid to the dispersion curve.</p>
<p>These figures show together estimates belonging to multiple modes and outliers not belonging to any mode of propagation. In order to separate the modes, continue reading to the next section.</p>
</div>
<div class="section" id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
<p>We now explain how it is possible to isolate a single mode of propagation and to reject outliers.</p>
<p>Considering the wavenumber-frequency plot, the user can select an upper and a lower bound containing the estimates of interest using the mouse. Once the selection is finalized, only the estimates between the bounds will be considered and the estimates outside will be disregarded.</p>
<p>During the filtering procedure, read and follow instructions given in console. The bounds are represented as piecewise linear functions. Pressing the mouse left button will add a new point, pressing the right button will remove the last point selected. When a bound is correctly selected, press the <code class="docutils literal notranslate"><span class="pre">SPACE</span> <span class="pre">KEY</span></code> to accept it.  Scrolling the mouse wheel or pressing the keys <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> it is possible to increase or reduce the width of the background estimate density.</p>
<p>For Love waves the selection is performed in the wavenumber-frequency plane. For Rayleigh waves the selection is first performed in the wavenumber-frequency plane and then in the ellipticity angle-frequency plane.</p>
<p>After the selection is done, more figures corresponding to the filtered points (i.e., the points within the selected bounds) are plotted and saved to file.</p>
<p>Moreover CSV files with the same format of the WaveDec output files are generated. In these files, only the filtered estimates are present.</p>
</div>
<div class="section" id="picking">
<h3>Picking<a class="headerlink" href="#picking" title="Permalink to this headline">¶</a></h3>
<p>In the last step, which requires no intervention from the user, the dispersion curve and the ellipticity angle curve are picked from the filtered estimates.</p>
<p>For dispersion curves, the median and the standard deviation of the filtered wavenumbers are computed.</p>
<p>For ellipticity angle curves, the circular median and the circular standard deviation of the filtered ellipticity angles are computed.</p>
<p>Picked curves are saved to a CSV file.</p>
<p>Several images are saved to file.</p>
</div>
<div class="section" id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<p>Some options for <code class="docutils literal notranslate"><span class="pre">wdPicker</span></code> can be set from command line. Help is shown with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wdPicker.py --help
</pre></div>
</div>
<p>The default value for these options can be modified in the file <code class="docutils literal notranslate"><span class="pre">wdSettings.py</span></code>.</p>
<p>Options include</p>
<ul class="simple">
<li><p>Image output format (png, pdf, …) and resolution (dpi)</p></li>
<li><p>Output folders for plots and CSV files</p></li>
<li><p>Default bandwidth/variance used for visualization of the estimates</p></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">User’s guide: wdPicker</a><ul>
<li><a class="reference internal" href="#analysis-of-the-output-files">Analysis of the output files</a><ul>
<li><a class="reference internal" href="#plotting">Plotting</a></li>
<li><a class="reference internal" href="#filtering">Filtering</a></li>
<li><a class="reference internal" href="#picking">Picking</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="userguide_WaveDecActive.html"
                        title="previous chapter">User’s guide: WaveDecActive</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="examples.html"
                        title="next chapter">Usage Examples</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Usage Examples"
             >next</a> |</li>
        <li class="right" >
          <a href="userguide_WaveDecActive.html" title="User’s guide: WaveDecActive"
             >previous</a> |</li>
<li><a href="https://github.com/StefanoMarano">Home</a> &#187; <a href="index.html">WaveDec  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer">
      Last updated on Apr 26, 2020.
    <br>
        &copy; Copyright 202, Stefano Maranò.
<!-- <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"/></a>-->
 This documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ?
"https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost +
"google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4477781-2");
pageTracker._trackPageview();
} catch(err) {}
</script>
  </body>
</html>