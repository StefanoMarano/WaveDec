<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>User’s guide: WaveDecActive &mdash; WaveDec  documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="WaveDec  documentation" href="index.html" />
    <link rel="next" title="User’s guide: wdPicker" href="userguide_wdPicker.html" />
    <link rel="prev" title="User’s guide: WaveDec" href="userguide_WaveDec.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="userguide_wdPicker.html" title="User’s guide: wdPicker"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="userguide_WaveDec.html" title="User’s guide: WaveDec"
             accesskey="P">previous</a> |</li>
<li><a href="http://mercalli.ethz.ch/~marra/">Home</a> &raquo; <a href="index.html">WaveDec  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-s-guide-wavedecactive">
<h1>User&#8217;s guide: WaveDecActive<a class="headerlink" href="#user-s-guide-wavedecactive" title="Permalink to this headline">¶</a></h1>
<p>WaveDecActive allows to model Rayleigh waves with circular wavefront. This is necessary whenever the sensors are placed near the source. When the source is close it is necessary to take into account the curvature of the wavefront and the amplitude decay due to geometrical spreading. This work was developed in <a class="reference internal" href="references.html#marano-et-al-2017b" id="id1">[Maranò_et_al_2017b]</a>.</p>
<p>Rayleigh waves radiating from a known source are modelled. Dispersion curve and ellipticity angle curve are retrieved.</p>
<p>A classical usage for WaveDecActive is the analysis or recordings of active seismic experiments from one or two dimensional arrays.</p>
<p>In particular it may be very practical to combine active and passive surveys using the same two dimensional array. A two dimensional array is deployed to measure ambient vibrations (passive survey) and the recordings are analysed using WaveDec. At the end of the survey,  Rayleigh waves are generated by using, for example, a hammer in combination with a metallic plate. The excitation of seismic waves (active survey) can be repeated multiple times at the same location (multiple shots) and at different locations (multiple source positions). Active recordings are analysed using WaveDecActive. Examples are found in <a class="reference internal" href="references.html#marano-et-al-2017b" id="id2">[Maranò_et_al_2017b]</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, WaveDecActive processes only the translational motions. If you are interested in the analysis of rotational motions and circular wavefronts, please send me an email <img class="math" src="_images/math/19ee356c8099901e9b2768d50c538a53314cb7df.png" alt="\textrm{wavedec&#64;gmail.com}"/>.</p>
</div>
<p>A typical command to run WaveDecActive looks as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre>$ WaveDecActive.py --config_file /path/to/config/file/MyConfig.yaml
</pre></div>
</div>
<p>As a command line option we specify the path and name of a configuration file.  This configuration file contains all the settings that you may wish to specify, including input/output and processing parameters. The syntax of this configuration file is described below.</p>
<p>To quickly display the traces it is possible to use the command line flag <code class="docutils literal"><span class="pre">--plot</span></code></p>
<div class="highlight-bash"><div class="highlight"><pre>$ WaveDecActive.py --config_file /path/to/config/file/MyConfig.yaml --plot
</pre></div>
</div>
<p>For example, a quick look at the waveform may reveal that the recordings of the sensors closest to the source is clipped and that they must be excluded from the processing.</p>
<div class="section" id="input-files">
<h2>Input files<a class="headerlink" href="#input-files" title="Permalink to this headline">¶</a></h2>
<p>The configuration file and the output files of WaveDecActive are very similar to those used by WaveDec. Therefore in this documentation we solely highlight the differences between the two.</p>
<div class="section" id="configuration-file">
<h3>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h3>
<p>The configuration file necessary to run WaveDecActive includes all the parameters described for a <a class="reference internal" href="userguide_WaveDec.html#wavedecconfigurationfile"><span>WaveDec configuration file</span></a>.</p>
<p>In addition, there are few <strong>mandatory</strong> parameters necessary to run WaveDecActive.</p>
<p>A fragment of a possible WaveDecActive file is shown below. (Only the parameters pertaining to WaveDecActive are shown)</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">...</span>
<span class="l l-Scalar l-Scalar-Plain">SourcePosition</span> <span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">685128.025</span><span class="p p-Indicator">,</span> <span class="nv">257495.474</span><span class="p p-Indicator">]</span> <span class="c1"># Position of the source [Easting, Northing] in meters.</span>
<span class="l l-Scalar l-Scalar-Plain">ShotStarts</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">2.2</span><span class="p p-Indicator">,</span> <span class="nv">5.0</span><span class="p p-Indicator">,</span> <span class="nv">18.1</span><span class="p p-Indicator">]</span>              <span class="c1"># Beginning of each shot, in seconds.</span>
<span class="l l-Scalar l-Scalar-Plain">ShotDuration</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.8</span>                         <span class="c1"># Duration of the time window to be analysed, in seconds.</span>
<span class="nn">...</span>
</pre></div>
</div>
<p>The parameter <code class="docutils literal"><span class="pre">SourcePosition</span></code> indicates the position of the active source. The position is specified in Cartesian coordinates in the same reference system used for the sensors&#8217; positions. It is possible to specify only a single source position. In case of multiple shooting locations, it is necessary to consider multiple configuration files.</p>
<p>The vector parameter <code class="docutils literal"><span class="pre">ShotStarts</span></code> specifies the beginnings of the waveforms to be considered in the analysis. Since typically multiple shots are performed at each shooting location, this parameter is an array of floating point values. The values are seconds since the beginning of the recording.</p>
<p>The parameter <code class="docutils literal"><span class="pre">ShotDuration</span></code> indicate the duration of a shot in seconds. The parameter is a scalar value and all the shots are considered to have the same duration.</p>
<p>The above parameters are shared among all the traces. These parameters must be chosen in order to include entirely the waveforms of interest. For example, attention should be payed not to trim the initial or the final parts of the waveforms at the closest and/or furthermost sensors from the source.</p>
<p>Before running the actual processing, execute WaveDecActive with the flag <code class="docutils literal"><span class="pre">--plot</span></code>. It will be possible to visually inspect the traces and each shot in order to verify that all the parameters are inserted correctly.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If your output files are empty or present very few waves, try with a smaller <code class="docutils literal"><span class="pre">Gamma</span></code> (e.g. <code class="docutils literal"><span class="pre">Gamma:</span> <span class="pre">0.5</span></code>, <code class="docutils literal"><span class="pre">Gamma:</span> <span class="pre">0.1</span></code>...). In our experience, this is necessary at most active survey sites.</p>
</div>
</div>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<p>Input data is provided as SAC files. See the relevant documentation of WaveDec.</p>
</div>
</div>
<div class="section" id="output-files">
<h2>Output files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<p>The output is saved to CSV files in the directory specified in the configuration file by <code class="docutils literal"><span class="pre">OUTPUT</span></code>. The output files can be opened with a spreadsheet or with a simple text editor.</p>
<div class="section" id="estimated-wavefield-parameters">
<h3>Estimated wavefield parameters<a class="headerlink" href="#estimated-wavefield-parameters" title="Permalink to this headline">¶</a></h3>
<p>Output files are analogous to the output files generated by WaveDec.</p>
<p>The only difference is the lack of the column <code class="docutils literal"><span class="pre">Azimuth</span></code> in the output file. In fact, there is no azimuth to be estimated in the circular wave model.</p>
</div>
<div class="section" id="resolution-limits">
<h3>Resolution limits<a class="headerlink" href="#resolution-limits" title="Permalink to this headline">¶</a></h3>
<p>Similarly to WaveDec, the file <code class="docutils literal"><span class="pre">ArrayResolutionLimits.csv</span></code> contains the resolutions limits of the array.</p>
<p>The study of resolution limits is an intricate matter. The resolution limits provided here should be considered as approximate and indicative only. Good results may show up outside the resolution limits, and bad results inside the limits. Be wise and use your expertise.</p>
<p>Let <img class="math" src="_images/math/48e3dd2dd6877be565b3b0316c3623861826c694.png" alt="d_{\textrm{min}}"/> and <img class="math" src="_images/math/42250acb4dc7c86ab4ef46f79ba6bb2ae8e984f2.png" alt="d_{\textrm{max}}"/> be the smallest and the largest interstation distance in the offset domain. In the offset domain, the distance of the sensor from the source are considered.</p>
<p>The smallest and largest resolvable wavenumbers are defined (in 1/meter) as <img class="math" src="_images/math/ec7ae14028605d0aee2c3a913f2eafb2f718a3eb.png" alt="\kappa_{\textrm{min}}=0.5/d_{\textrm{max}}"/> and <img class="math" src="_images/math/bc1e49c08f83c8de28403f098be524e510d8b605.png" alt="\kappa_{\textrm{max}}=0.5/d_{\textrm{min}}"/>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The resolution limits are computed as <img class="math" src="_images/math/0919db337158bac70c4ffff779331fff201cce35.png" alt="\kappa_{\textrm{max}}=c_1/d_{\textrm{min}}"/> and <img class="math" src="_images/math/d1a85290519b2597ea345e3ffd0c2608494e6bb4.png" alt="\kappa_{\textrm{min}}=c_2/d_{\textrm{max}}"/>. The value of <img class="math" src="_images/math/3b3656365ff2748ee55de15a942b63693cb47dae.png" alt="c_1"/> and <img class="math" src="_images/math/5081ba4156b5c83e0ad11d0dbf1ddd83fa988929.png" alt="c_2"/> can be changed in the file <code class="docutils literal"><span class="pre">wdSettings.py</span></code>.</p>
</div>
</div>
<div class="section" id="array-layout">
<h3>Array Layout<a class="headerlink" href="#array-layout" title="Permalink to this headline">¶</a></h3>
<p>The file <code class="docutils literal"><span class="pre">ArrayLayout.csv</span></code> contains the coordinates of the sensors. These values correspond with the values contained in the header of the input files.</p>
<p>The file <code class="docutils literal"><span class="pre">SourcePosition.csv</span></code> contains the coordinates of the source. This value corresponds with the value provided in the configuration file.</p>
</div>
<div class="section" id="log-file">
<h3>Log file<a class="headerlink" href="#log-file" title="Permalink to this headline">¶</a></h3>
<p>The file <code class="docutils literal"><span class="pre">WaveDecActive.log</span></code> is saved in the same directory specified by <code class="docutils literal"><span class="pre">OUTPUT</span></code>. It contains all the output printed to screen from WaveDecActive.</p>
</div>
</div>
<div class="section" id="analysis-of-the-output-files">
<h2>Analysis of the output files<a class="headerlink" href="#analysis-of-the-output-files" title="Permalink to this headline">¶</a></h2>
<p>The script <code class="docutils literal"><span class="pre">wdPicker.py</span></code> allows to visualise and perform some analysis of WaveDecActive output files. See <a class="reference internal" href="userguide_wdPicker.html"><em>User&#8217;s guide: wdPicker</em></a> for details.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">User&#8217;s guide: WaveDecActive</a><ul>
<li><a class="reference internal" href="#input-files">Input files</a><ul>
<li><a class="reference internal" href="#configuration-file">Configuration file</a></li>
<li><a class="reference internal" href="#data">Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#output-files">Output files</a><ul>
<li><a class="reference internal" href="#estimated-wavefield-parameters">Estimated wavefield parameters</a></li>
<li><a class="reference internal" href="#resolution-limits">Resolution limits</a></li>
<li><a class="reference internal" href="#array-layout">Array Layout</a></li>
<li><a class="reference internal" href="#log-file">Log file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#analysis-of-the-output-files">Analysis of the output files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="userguide_WaveDec.html"
                        title="previous chapter">User&#8217;s guide: WaveDec</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="userguide_wdPicker.html"
                        title="next chapter">User&#8217;s guide: wdPicker</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="userguide_wdPicker.html" title="User’s guide: wdPicker"
             >next</a> |</li>
        <li class="right" >
          <a href="userguide_WaveDec.html" title="User’s guide: WaveDec"
             >previous</a> |</li>
<li><a href="http://mercalli.ethz.ch/~marra/">Home</a> &raquo; <a href="index.html">WaveDec  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Last updated on Jul 15, 2017.
    <br>
        &copy; Copyright 2017, Stefano Maranò.
<!-- <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"/></a>-->
 This documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ?
"https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost +
"google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4477781-2");
pageTracker._trackPageview();
} catch(err) {}
</script>
  </body>
</html>